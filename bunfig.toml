# 🚀 Bun Configuration for profile-weather-view
# Optimized for Bun v1.2.19+ and weather profile project needs

# ================================
# 🎯 Core Runtime Configuration
# ================================

# Performance optimization - keep false for better performance
smol = false

# Logging level - warn is good for production-like behavior
logLevel = "warn"

# Enable error stack traces for better debugging
errorStackTraces = true

# Disable telemetry for privacy
telemetry = false

# ================================
# ⚡ Preload Critical Modules
# ================================

# Preload essential modules for faster startup
preload = [
    "./src/weather-update/utils/preload.ts"
]

# ================================
# 🔧 Runtime Execution
# ================================

[run]
# Use Bun for script execution (better performance)
bun = true

# Enable silent mode for cleaner output in CI
silent = false

# ================================
# 📦 Package Management
# ================================

[install]
# Install all dependency types
optional = true
dev = true
peer = true
production = false

# Use exact versions for reproducible builds
exact = false

# Auto-install missing dependencies
auto = "fallback"

# Use frozen lockfile for CI consistency
frozenLockfile = false

# Save text-based lockfile (more readable)
saveTextLockfile = true

# Enable ESM by default
esm = true

# Default registry
registry = "https://registry.npmjs.org"

# Concurrent script execution
concurrentScripts = 8

# ================================
# 🧪 Testing Configuration
# ================================

[test]
# Enable coverage by default
coverage = true

# Use Node.js environment for tests (ignored by Vitest)
environment = "node"

# Coverage thresholds for quality assurance (plural keys per current docs)
coverageThreshold = {
    lines = 0.8,
    functions = 0.8,
    statements = 0.8
}

# Coverage reporting formats
coverageReporter = ["text", "lcov"]

# Coverage output directory
coverageDir = "coverage"

# Skip test files from coverage reports
coverageSkipTestFiles = true

# Ignore patterns for coverage
coveragePathIgnorePatterns = [
    "**/*.test.ts",
    "**/*.spec.ts",
    "**/__tests__/**",
    "**/node_modules/**",
    "**/*.config.*",
    "**/dist/**"
]

# ================================
# 🔍 File Loading & Handling
# ================================

[loader]
# TypeScript and modern formats
".ts" = "ts"
".tsx" = "tsx"
".mts" = "ts"
".json" = "json"
".toml" = "toml"

# ================================
# 🎨 Console Configuration
# ================================

[console]
# Object inspection depth for better debugging
depth = 3

# ================================
# 🔐 Security & Cache
# ================================

[install.cache]
# Cache directory
dir = "~/.bun/install/cache"

# Enable global cache for faster installs
disable = false

# Always resolve latest versions
disableManifest = false
